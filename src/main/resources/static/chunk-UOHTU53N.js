import{a as C}from"./chunk-AIIRRMCX.js";import{e as v}from"./chunk-VMS3RUEP.js";import{a as w,b as p,c as S,d as P,g as M,h as y,i as O,p as E,q as F,r as I}from"./chunk-BB36JPNX.js";import{$a as u,Da as d,Ia as b,Ma as m,Pb as h,Ta as l,Ua as g,Ub as x,Wa as i,Xa as o,Ya as c,_a as f,hb as s,jb as _,za as a}from"./chunk-SRQFOZRN.js";import"./chunk-7CGTOI24.js";function T(t,r){if(t&1&&(i(0,"div",15),s(1),o()),t&2){let n=u();a(),_(" ",n.loginError," ")}}function N(t,r){t&1&&(i(0,"span"),s(1,"Email is required"),o())}function z(t,r){t&1&&(i(0,"span"),s(1,"Please enter a valid email"),o())}function G(t,r){if(t&1&&(i(0,"div",16),m(1,N,2,0,"span",13)(2,z,2,0,"span",13),o()),t&2){let n=u();a(),l("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.required),a(),l("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.email)}}function A(t,r){t&1&&(i(0,"span"),s(1,"Password is required"),o())}function R(t,r){t&1&&(i(0,"span"),s(1,"Password must be at least 6 characters"),o())}function q(t,r){if(t&1&&(i(0,"div",16),m(1,A,2,0,"span",13)(2,R,2,0,"span",13),o()),t&2){let n=u();a(),l("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.required),a(),l("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.minlength)}}function j(t,r){t&1&&(i(0,"span"),s(1,"Submit"),o())}function D(t,r){t&1&&(i(0,"span"),s(1,"Logging in..."),o())}var k=class t{constructor(r,n,e){this.fb=r;this.router=n;this.authService=e;this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}loginForm;isSubmitting=!1;loginError="";onSubmit(){if(this.loginForm.valid){this.isSubmitting=!0,this.loginError="";let{email:r,password:n}=this.loginForm.value;this.authService.login(r,n).subscribe({next:e=>{this.isSubmitting=!1,console.log("Login successful:",e),this.router.navigate(["/admin"])},error:e=>{this.isSubmitting=!1,this.loginError="Invalid credentials. Please try again.",console.error("Login error:",e)}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(r=>{let n=this.loginForm.get(r);n&&n.markAsTouched()})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}navigateToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(n){return new(n||t)(d(E),d(v),d(C))};static \u0275cmp=b({type:t,selectors:[["app-login"]],decls:22,vars:11,consts:[[1,"auth-container"],[1,"auth-form"],[1,"auth-title"],["class","error-banner",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","placeholder","Email",1,"form-input"],["class","error-message",4,"ngIf"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password","placeholder","Password",1,"form-input"],[1,"form-actions"],["type","submit",1,"submit-btn","btn-gradient",3,"disabled"],[4,"ngIf"],["type","button",1,"forgot-password-btn",3,"click"],[1,"error-banner"],[1,"error-message"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Login to Your Account"),o(),m(4,T,2,1,"div",3),i(5,"form",4),f("ngSubmit",function(){return e.onSubmit()}),i(6,"div",5)(7,"label",6),s(8,"Username or Email"),o(),c(9,"input",7),m(10,G,3,2,"div",8),o(),i(11,"div",5)(12,"label",9),s(13,"Password"),o(),c(14,"input",10),m(15,q,3,2,"div",8),o(),i(16,"div",11)(17,"button",12),m(18,j,2,0,"span",13)(19,D,2,0,"span",13),o(),i(20,"button",14),f("click",function(){return e.navigateToRegister()}),s(21," New Here? Sign Up "),o()()()()()),n&2&&(a(4),l("ngIf",e.loginError),a(),l("formGroup",e.loginForm),a(4),g("error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(),l("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(4),g("error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(),l("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(2),l("disabled",e.loginForm.invalid||e.isSubmitting),a(),l("ngIf",!e.isSubmitting),a(),l("ngIf",e.isSubmitting))},dependencies:[I,M,w,S,P,y,O,x,h,F],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;margin-top:3%;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.auth-form[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:7px;box-shadow:0 20px 40px #0000001a;width:100%;max-width:350px;border-top:4px solid #0066ff}.auth-title[_ngcontent-%COMP%]{text-align:center;color:#374151;font-size:20px;font-weight:600;margin-bottom:24px;margin-top:0}.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-label[_ngcontent-%COMP%]{display:block;color:#374151;font-size:14px;font-weight:500;margin-bottom:8px}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;transition:all .2s ease;background:#fff;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#06f;box-shadow:0 0 0 3px #6366f11a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444}.form-input.error[_ngcontent-%COMP%]:focus{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:12px;margin-top:6px}.form-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:20px}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:12px 20px;background:#06f;color:#fff;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s ease}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#5855eb;transform:translateY(-1px);box-shadow:0 4px 12px #6366f166}.submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.submit-btn[_ngcontent-%COMP%]:disabled{background:#06f;cursor:not-allowed;transform:none;box-shadow:none}.forgot-password-btn[_ngcontent-%COMP%]{background:none;border:none;color:#06f;font-size:14px;cursor:pointer;text-align:right;transition:color .2s ease;padding:0}.forgot-password-btn[_ngcontent-%COMP%]:hover{color:#06f;text-decoration:underline}.register-btn[_ngcontent-%COMP%]{background:#06f}.register-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#06f}@media (max-width: 480px){.auth-container[_ngcontent-%COMP%]{padding:16px;margin-top:-5%}.auth-form[_ngcontent-%COMP%]{padding:24px;box-shadow:0 20px 40px #00000052}.auth-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:24px}}.error-banner[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:12px 20px;border-radius:4px;border:1px solid #f5c6cb;margin-bottom:20px;font-size:14px;line-height:1.5;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}"]})};export{k as LoginComponent};
