import{a as P}from"./chunk-AIIRRMCX.js";import{e as C}from"./chunk-VMS3RUEP.js";import{a as S,b as d,c as y,d as E,g as M,h as F,i as R,p as I,q as O,r as T}from"./chunk-BB36JPNX.js";import{$a as p,Da as g,Ia as b,Ma as m,Pb as w,Ta as s,Ua as u,Ub as x,Wa as i,Xa as r,Ya as c,_a as v,hb as l,jb as h,za as a}from"./chunk-SRQFOZRN.js";import"./chunk-7CGTOI24.js";function N(t,o){if(t&1&&(i(0,"div",21),l(1),r()),t&2){let n=p();a(),h(" ",n.registerError," ")}}function q(t,o){t&1&&(i(0,"span"),l(1,"Name is required"),r())}function z(t,o){t&1&&(i(0,"span"),l(1,"Name must be at least 2 characters"),r())}function G(t,o){if(t&1&&(i(0,"div",22),m(1,q,2,0,"span",19)(2,z,2,0,"span",19),r()),t&2){let n=p();a(),s("ngIf",n.name==null||n.name.errors==null?null:n.name.errors.required),a(),s("ngIf",n.name==null||n.name.errors==null?null:n.name.errors.minlength)}}function A(t,o){t&1&&(i(0,"span"),l(1,"Username is required"),r())}function j(t,o){t&1&&(i(0,"span"),l(1,"Username must be at least 3 characters"),r())}function U(t,o){if(t&1&&(i(0,"div",22),m(1,A,2,0,"span",19)(2,j,2,0,"span",19),r()),t&2){let n=p();a(),s("ngIf",n.username==null||n.username.errors==null?null:n.username.errors.required),a(),s("ngIf",n.username==null||n.username.errors==null?null:n.username.errors.minlength)}}function D(t,o){t&1&&(i(0,"span"),l(1,"Email is required"),r())}function L(t,o){t&1&&(i(0,"span"),l(1,"Please enter a valid email"),r())}function V(t,o){if(t&1&&(i(0,"div",22),m(1,D,2,0,"span",19)(2,L,2,0,"span",19),r()),t&2){let n=p();a(),s("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.required),a(),s("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.email)}}function Y(t,o){t&1&&(i(0,"span"),l(1,"Password is required"),r())}function B(t,o){t&1&&(i(0,"span"),l(1,"Password must be at least 6 characters"),r())}function H(t,o){if(t&1&&(i(0,"div",22),m(1,Y,2,0,"span",19)(2,B,2,0,"span",19),r()),t&2){let n=p();a(),s("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.required),a(),s("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.minlength)}}function J(t,o){t&1&&(i(0,"span"),l(1,"Please confirm your password"),r())}function K(t,o){t&1&&(i(0,"span"),l(1,"Passwords do not match"),r())}function Q(t,o){if(t&1&&(i(0,"div",22),m(1,J,2,0,"span",19)(2,K,2,0,"span",19),r()),t&2){let n=p();a(),s("ngIf",n.confirmPassword==null||n.confirmPassword.errors==null?null:n.confirmPassword.errors.required),a(),s("ngIf",n.confirmPassword==null||n.confirmPassword.errors==null?null:n.confirmPassword.errors.passwordMismatch)}}function W(t,o){t&1&&(i(0,"span"),l(1,"Register"),r())}function X(t,o){t&1&&(i(0,"span"),l(1,"Registering..."),r())}var k=class t{constructor(o,n,e){this.fb=o;this.router=n;this.authService=e;this.registerForm=this.fb.group({name:["",[d.required,d.minLength(2)]],username:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validator:this.passwordMatchValidator})}registerForm;isSubmitting=!1;registerError="";passwordMatchValidator(o){let n=o.get("password"),e=o.get("confirmPassword");return n&&e&&n.value!==e.value?e.setErrors({passwordMismatch:!0}):e?.errors?.passwordMismatch&&(delete e.errors.passwordMismatch,Object.keys(e.errors).length===0&&e.setErrors(null)),null}onSubmit(){if(console.log("Form submitted"),console.log("Form valid:",this.registerForm.valid),console.log("Form values:",this.registerForm.value),this.registerForm.valid){this.isSubmitting=!0,this.registerError="";let{name:o,username:n,email:e,password:_}=this.registerForm.value;this.authService.register({name:o,username:n,email:e,password:_}).subscribe({next:f=>{this.isSubmitting=!1,console.log("Registration successful:",f),this.router.navigate(["/admin/dashboard"])},error:f=>{this.isSubmitting=!1,f.error?.error?this.registerError=f.error.error:this.registerError="Registration failed. Please try again.",console.error("Registration error:",f)}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.registerForm.controls).forEach(o=>{let n=this.registerForm.get(o);n&&n.markAsTouched()})}get name(){return this.registerForm.get("name")}get username(){return this.registerForm.get("username")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||t)(g(I),g(C),g(P))};static \u0275cmp=b({type:t,selectors:[["app-register"]],decls:37,vars:20,consts:[[1,"auth-container"],[1,"auth-form"],[1,"auth-title"],["class","error-banner",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name",1,"form-label"],["id","name","type","text","formControlName","name","placeholder","Full Name",1,"form-input"],["class","error-message",4,"ngIf"],["for","username",1,"form-label"],["id","username","type","text","formControlName","username","placeholder","Username",1,"form-input"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","placeholder","Email",1,"form-input"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password","placeholder","Password",1,"form-input"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Confirm Password",1,"form-input"],[1,"form-actions"],["type","submit",1,"submit-btn","register-btn","btn-gradient",3,"disabled"],[4,"ngIf"],["type","button",1,"forgot-password-btn",3,"click"],[1,"error-banner"],[1,"error-message"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),l(3,"Create Your Account"),r(),m(4,N,2,1,"div",3),i(5,"form",4),v("ngSubmit",function(){return e.onSubmit()}),i(6,"div",5)(7,"label",6),l(8,"Name"),r(),c(9,"input",7),m(10,G,3,2,"div",8),r(),i(11,"div",5)(12,"label",9),l(13,"Username"),r(),c(14,"input",10),m(15,U,3,2,"div",8),r(),i(16,"div",5)(17,"label",11),l(18,"Email"),r(),c(19,"input",12),m(20,V,3,2,"div",8),r(),i(21,"div",5)(22,"label",13),l(23,"Password"),r(),c(24,"input",14),m(25,H,3,2,"div",8),r(),i(26,"div",5)(27,"label",15),l(28,"Confirm Password"),r(),c(29,"input",16),m(30,Q,3,2,"div",8),r(),i(31,"div",17)(32,"button",18),m(33,W,2,0,"span",19)(34,X,2,0,"span",19),r(),i(35,"button",20),v("click",function(){return e.navigateToLogin()}),l(36," Already User? Sign in "),r()()()()()),n&2&&(a(4),s("ngIf",e.registerError),a(),s("formGroup",e.registerForm),a(4),u("error",(e.name==null?null:e.name.invalid)&&(e.name==null?null:e.name.touched)),a(),s("ngIf",(e.name==null?null:e.name.invalid)&&(e.name==null?null:e.name.touched)),a(4),u("error",(e.username==null?null:e.username.invalid)&&(e.username==null?null:e.username.touched)),a(),s("ngIf",(e.username==null?null:e.username.invalid)&&(e.username==null?null:e.username.touched)),a(4),u("error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(),s("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(4),u("error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(),s("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(4),u("error",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),a(),s("ngIf",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),a(2),s("disabled",e.registerForm.invalid||e.isSubmitting),a(),s("ngIf",!e.isSubmitting),a(),s("ngIf",e.isSubmitting))},dependencies:[T,M,S,y,E,F,R,x,w,O],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;margin-top:3%;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.auth-form[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:7px;box-shadow:0 20px 40px #0000001a;width:100%;max-width:350px;border-top:4px solid #0066ff}.auth-title[_ngcontent-%COMP%]{text-align:center;color:#374151;font-size:18px;font-weight:600;margin-bottom:18px;margin-top:0}.form-group[_ngcontent-%COMP%]{margin-bottom:14px}.form-label[_ngcontent-%COMP%]{display:block;color:#374151;font-size:13px;font-weight:500;margin-bottom:6px}.form-input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:2px solid #e5e7eb;border-radius:6px;font-size:13px;transition:all .2s ease;background:#fff;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#06f;box-shadow:0 0 0 3px #6366f11a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444}.form-input.error[_ngcontent-%COMP%]:focus{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:11px;margin-top:4px}.form-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:16px}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:10px 20px;background:#06f;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#5855eb;transform:translateY(-1px);box-shadow:0 4px 12px #6366f166}.submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.submit-btn[_ngcontent-%COMP%]:disabled{background:#06f;cursor:not-allowed;transform:none;box-shadow:none}.forgot-password-btn[_ngcontent-%COMP%]{background:none;border:none;color:#06f;font-size:14px;cursor:pointer;text-align:right;transition:color .2s ease;padding:0}.forgot-password-btn[_ngcontent-%COMP%]:hover{color:#06f;text-decoration:underline}.register-btn[_ngcontent-%COMP%]{background:#06f}.register-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#06f}@media (max-width: 480px){.auth-container[_ngcontent-%COMP%]{padding:16px;margin-top:-2%}.auth-form[_ngcontent-%COMP%]{padding:24px;box-shadow:0 20px 40px #00000052}.auth-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:24px}}.error-banner[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:12px 20px;border-radius:4px;border:1px solid #f5c6cb;margin-bottom:20px;font-size:14px;line-height:1.5;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}"]})};export{k as RegisterComponent};
